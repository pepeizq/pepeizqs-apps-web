@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Data.SqlClient

@{
    #nullable disable

    string github = "https://github.com/pepeizq/";

    string idioma = Context.Request.Headers["Accept-Language"].ToString().Split(";").FirstOrDefault()?.Split(",").FirstOrDefault();

    string titulo = ViewData["Title"].ToString();

    if (titulo.Contains("pepeizq's apps") == false)
    {
        titulo = titulo + " • pepeizq's apps";
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@titulo</title>

    <link rel="stylesheet" href="~/css/bundle.css" type="text/css" media="print" onload="this.media='all'" />

    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="msapplication-TileColor" content="#007272" />
    <meta name="msapplication-TileImage" content="/favicons/ms-icon-144x144.png" />
    <meta name="theme-color" content="#007272" />

    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />

    <base href="/" />
</head>

<body class="cuerpo">
    <header class="cabecera">
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm" style="padding: 0px;">
            <div class="cabecera-poner cuerpo-ancho" style="justify-content: start; display: flex; align-items: center;">
                <div class="menu-dropdown">
                    <button class="texto-cabecera" style="border: 0px; margin-left: 0px; margin-right: 30px;" title="Hamburger"><i class="fa-solid fa-bars" style="font-size: 20px; line-height: 40px;"></i></button>
                    <div class="menu-dropdown-contenido">
                        <a class="texto-cabecera menu-dropdown-item" asp-page="/last-updates" target="_blank">
                            @Herramientas.Idiomas.BuscarTexto(idioma, "Title", "LastUpdates")
                        </a>
                    </div>
                </div>

                <a class="texto-logo" asp-page="/Index" target="_blank">pepeizq's apps</a>

                <component type="typeof(Componentes.Buscador)" render-mode="ServerPrerendered" param-idioma="Model.idioma" />

                <div style="flex: 1; display: flex; align-items: center; justify-content: right; font-size: 25px; text-align: right;">
                    <div style="margin-left: 6px; margin-right: 6px;">
                        <a href="@github" target="_blank" title="Github">
                            <svg style="width: 26px; height: 26px; fill: var(--colorEnlace);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
                                <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main id="cuerpazo" role="main" class="cuerpo-ancho">
        @RenderBody()
    </main>

    <footer class="pie">
        <div class="cuerpo-ancho" style="padding-top: 30px; padding-bottom: 30px; display: flex; align-items: center; font-size: 17px;">
            <div style="width: 50%; text-align: left;">
                <div>
                    &copy; @DateTime.Now.Year.ToString() • <a href="https://pepeizqapps.com/" style="text-decoration: none;" target="_blank">pepeizq's apps</a> • <a href="https://pepeizqdeals.com/" style="text-decoration: none;" target="_blank">pepeizq's deals</a>
                </div>

                <div style="font-size: 16px; margin-top: 30px;">
                    <a href="https://github.com/pepeizq/pepeizqs-apps-web/" target="_blank" style="text-decoration: none;"><i class="fa-brands fa-github" style="font-size: 20px; margin-right: 10px;"></i>@Herramientas.Idiomas.BuscarTexto(idioma, "SourceCode", "Index")</a> • admin@pepeizqapps.com • <a href="/Privacy" style="text-decoration: none;">@Herramientas.Idiomas.BuscarTexto(idioma, "Title", "Privacy")</a>
                </div>
            </div>

            <div style="width: 40%; overflow: hidden;">
                @{
                    int estrellas = 0;
                    int forks = 0;
                    int suscriptores = 0;

                    List<global::BaseDatos.GithubBaseDatos> bdGithub = new List<global::BaseDatos.GithubBaseDatos>();

                    SqlConnection conexion = new SqlConnection();

                    if (conexion.State != System.Data.ConnectionState.Open)
                    {
                        conexion = Herramientas.BaseDatos.Conectar();
                    }

                    using (conexion)
                    {
                        bdGithub = global::BaseDatos.Github.Todo(conexion);
                    }

                    foreach (var entrada in bdGithub)
                    {
                        estrellas = estrellas + entrada.Estrellas;
                        forks = forks + entrada.Forks;
                        suscriptores = suscriptores + entrada.Suscriptores;
                    }
                }

                <a href="https://github.com/pepeizq/" target="_blank" style="text-decoration: none;" title="Github">
                    <div class="boton-github" style="padding: 20px; background-color: rgba(36, 41, 46, 0.85); color: var(--colorTexto);">
                        <div style="display: flex; align-items: center;">
                            <svg style="width: 32px; height: 32px; fill: var(--colorTexto);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
                                <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
                            </svg>

                            <div style="width: 100%; padding-left: 20px; font-size: 15px;">
                                @Herramientas.Idiomas.BuscarTexto(idioma, "Github1", "Index")
                            </div>
                        </div>

                        <div style="display: flex; align-items: center; font-size: 14px; margin-left: 52px; margin-top: 15px;">
                            <div>@Herramientas.Idiomas.BuscarTexto(idioma, "Github2", "Index")</div>

                            <div style="margin-left: 15px;"><i class="fa-solid fa-star"></i></div>
                            <div style="padding-left: 10px;">@estrellas</div>

                            <div style="margin-left: 15px;"><i class="fa-solid fa-code-fork"></i></div>
                            <div style="padding-left: 10px;">@forks</div>

                            <div style="margin-left: 15px;"><i class="fa-solid fa-eye"></i></div>
                            <div style="padding-left: 10px;">@suscriptores</div>
                        </div>
                    </div>
                </a>
            </div>

            <div style="width: 10%; text-align: right;">
                <a onclick="moverScroll('cuerpazo')" style="color: var(--colorTextoOscuro); text-decoration: none; cursor: pointer;">
                    <i class="fa-solid fa-chevron-up subir-arriba" style="font-size: 22px;"></i>
                </a>
            </div>
        </div>
    </footer>

@*     <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script> *@

    <script src="~/superjs.js" defer></script>

    <script src="_framework/blazor.server.js" autostart="false"></script>
    <script>
        async function boot() {
            await Blazor.start()

            while (Blazor.defaultReconnectionHandler === undefined) {
                await delay(100)
            }
            Blazor.defaultReconnectionHandler._reconnectCallback = function (d) {
                document.location.reload()
            }
        }

        boot()
    </script>

    <script>
        function moverScroll(id) {
            const element = document.getElementById(id);
            const y = element.getBoundingClientRect().top;

            window.scrollTo({ top: y, behavior: 'smooth' });
        }
    </script>

    <div id="components-reconnect-modal" style="display: none" />

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>